behavior OrderSentenceExercise
    def addPart(span)
        get #sentence-container then remove .hidden from it
        make a <span/> then add .{'ml-1.5'} to it 
        set its textContent to span's textContent
        set @data-value of it to span's @value
        put it at end of the #sentence-container
    end

    def removePart(span)
        set sentenceContainer to document.getElementById("sentence-container")
        set partToRemove to sentenceContainer.querySelector(`span[data-value="${span@value}"]`)
        if partToRemove exists
            remove partToRemove
        end
        if sentenceContainer.children.length === 0
            add .hidden to #sentence-container
        end
    end
    
    on click from #word-container
        if event.target matches "span"
            set span to event.target
            set part to span.textContent
            if span matches '.bg-indigo-600'
                remove .bg-indigo-600 .text-white from span
                add .bg-indigo-100 .text-indigo-800 .hover:bg-indigo-200 to span
                call removePart(span)
            else
                add .bg-indigo-600 .text-white to span
                remove .bg-indigo-100 .text-indigo-800 .hover:bg-indigo-200 from span
                call addPart(span)
            end
        end
    end

    def getAnswer()
        set sentenceContainer to document.getElementById("sentence-container")
        set sentence to ''
        for span in sentenceContainer.querySelectorAll("span")
            set sentence to `${sentence} ${span.textContent}`
        end
        return {"sentence": sentence}
    end

    def checkAnswer(url)
        call checkExercise(url, getAnswer()) then put it into exerciseResult
        call setMessageContent(exerciseResult)
        wait 4s then call loadExercise()
    end
end